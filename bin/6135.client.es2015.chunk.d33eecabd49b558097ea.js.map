{"version":3,"sources":["webpack://ressurectit.github.io/./node_modules/@anglr/select/dist/es2015/src/misc/optionsGatherer/dynamicOptionsGatherer.js","webpack://ressurectit.github.io/./node_modules/@anglr/select/dist/es2015/src/plugins/valueHandler/dynamic/dynamicValueHandler.component.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","DynamicOptionsGatherer","constructor","_options","this","_minLength","_initialized","options","optionsChange","Error","isPresent","minLength","initializeGatherer","liveSearch","ngSelectPlugins","_liveSearch","_searchValueChangeSubscription","unsubscribe","popup","_popup","_visibilitySubscription","_valueHandler","visibilityChange","subscribe","_processOptionsChange","searchValueChange","delay","pipe","destroyGatherer","_a","_b","searchValue","pluginBus","selectOptions","multiple","Array","isArray","selectedOptions","text","length","emit","dynamicOptionsCallback","defaultOptions","textExtractor","DynamicValueHandlerComponent","pluginElement","super","_setValue","option","find","selOpt","valueComparer","index","indexOf","splice","push","_clearSelected","_markValueAsSelected","_normalState","invalidateVisuals","valueChange","extend","setValue","_useOptionsAsValue","initOptions","_loadOptions","isBlank","items","itm","_loadText","item","opts","opt","selected","active","t","type","selectors","features","decls","vars","template","rf","ctx","encapsulation","changeDetection","ctorParameters","undefined","decorators","args"],"mappings":"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","file":"6135.client.es2015.chunk.d33eecabd49b558097ea.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: src/misc/optionsGatherer/dynamicOptionsGatherer.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nimport { EventEmitter } from \"@angular/core\";\r\nimport { isPresent } from \"@jscrpt/common\";\r\nimport { debounceTime } from \"rxjs/operators\";\r\nimport { LIVE_SEARCH } from \"../../plugins/liveSearch/types\";\r\nimport { POPUP } from '../../plugins/popup/types';\r\nimport { VALUE_HANDLER } from '../../plugins/valueHandler/types';\r\n/**\r\n * Class that is used as for options gathering in dynamic way, for example from external source when writing\r\n * @template TValue\r\n */\r\nexport class DynamicOptionsGatherer {\r\n    //######################### constructor #########################\r\n    /**\r\n     * @param {?} _options\r\n     */\r\n    constructor(_options) {\r\n        this._options = _options;\r\n        /**\r\n         * Minimal number of characters required for searching\r\n         */\r\n        this._minLength = 1;\r\n        /**\r\n         * Indication that first initial call was performed\r\n         */\r\n        this._initialized = false;\r\n        //######################### public properties - implementation of OptionsGatherer #########################\r\n        /**\r\n         * Array of provided options for select\r\n         */\r\n        this.options = [];\r\n        /**\r\n         * Occurs when array of provided options has changed\r\n         */\r\n        this.optionsChange = new EventEmitter();\r\n        if (!this._options) {\r\n            throw new Error(\"Options can not be null!\");\r\n        }\r\n        if (this._options && isPresent(this._options.minLength)) {\r\n            this._minLength = this._options.minLength;\r\n        }\r\n    }\r\n    /**\r\n     * Array of visible, displayed options for select\r\n     * @return {?}\r\n     */\r\n    get availableOptions() {\r\n        return this.options;\r\n    }\r\n    /**\r\n     * Occurs when array of visible, displayed options has changed\r\n     * @return {?}\r\n     */\r\n    get availableOptionsChange() {\r\n        return this.optionsChange;\r\n    }\r\n    //######################### public methods - implementation of OptionsGatherer #########################\r\n    /**\r\n     * Initialize gatherer during initialization phase\r\n     * @return {?}\r\n     */\r\n    initializeGatherer() {\r\n        /** @type {?} */\r\n        let liveSearch = (/** @type {?} */ (this.ngSelectPlugins[LIVE_SEARCH]));\r\n        if (this._liveSearch && this._liveSearch != liveSearch) {\r\n            this._searchValueChangeSubscription.unsubscribe();\r\n            this._searchValueChangeSubscription = null;\r\n            this._liveSearch = null;\r\n        }\r\n        /** @type {?} */\r\n        let popup = (/** @type {?} */ (this.ngSelectPlugins[POPUP]));\r\n        if (this._popup && this._popup != popup) {\r\n            this._visibilitySubscription.unsubscribe();\r\n            this._visibilitySubscription = null;\r\n            this._popup = null;\r\n        }\r\n        this._valueHandler = (/** @type {?} */ (this.ngSelectPlugins[VALUE_HANDLER]));\r\n        if (!this._popup) {\r\n            this._popup = popup;\r\n            this._visibilitySubscription = this._popup.visibilityChange.subscribe((/**\r\n             * @return {?}\r\n             */\r\n            () => __awaiter(this, void 0, void 0, function* () {\r\n                if (this._initialized) {\r\n                    return;\r\n                }\r\n                yield this._processOptionsChange();\r\n            })));\r\n        }\r\n        if (!this._liveSearch) {\r\n            this._liveSearch = liveSearch;\r\n            /** @type {?} */\r\n            let searchValueChange = this._liveSearch.searchValueChange;\r\n            if (this._options.delay) {\r\n                searchValueChange = searchValueChange.pipe(debounceTime(this._options.delay));\r\n            }\r\n            this._searchValueChangeSubscription = searchValueChange.subscribe((/**\r\n             * @return {?}\r\n             */\r\n            () => __awaiter(this, void 0, void 0, function* () { return yield this._processOptionsChange(); })));\r\n        }\r\n    }\r\n    /**\r\n     * Called when gatherer needs to be destroyed\r\n     * @return {?}\r\n     */\r\n    destroyGatherer() {\r\n        var _a, _b;\r\n        (_a = this._searchValueChangeSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\r\n        this._searchValueChangeSubscription = null;\r\n        (_b = this._visibilitySubscription) === null || _b === void 0 ? void 0 : _b.unsubscribe();\r\n        this._visibilitySubscription = null;\r\n    }\r\n    //######################### protected methods #########################\r\n    /**\r\n     * Process options change request\r\n     * @protected\r\n     * @return {?}\r\n     */\r\n    _processOptionsChange() {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            /** @type {?} */\r\n            let searchValue = this._liveSearch.searchValue;\r\n            //use value as search value if not initialized\r\n            if (!this._initialized && !this.pluginBus.selectOptions.multiple && !Array.isArray(this._valueHandler.selectedOptions) && isPresent(this._valueHandler.selectedOptions)) {\r\n                searchValue = (_a = this._liveSearch.searchValue) !== null && _a !== void 0 ? _a : this._valueHandler.selectedOptions.text;\r\n            }\r\n            this._initialized = true;\r\n            if (((_b = searchValue === null || searchValue === void 0 ? void 0 : searchValue.length) !== null && _b !== void 0 ? _b : 0) < this._minLength) {\r\n                //remove available options if multiple or empty string\r\n                if (isPresent(searchValue) || this.pluginBus.selectOptions.multiple) {\r\n                    this.options = [];\r\n                    this.optionsChange.emit();\r\n                }\r\n                return;\r\n            }\r\n            this.options = yield this._options.dynamicOptionsCallback(searchValue !== null && searchValue !== void 0 ? searchValue : '');\r\n            this.optionsChange.emit();\r\n        });\r\n    }\r\n}\r\nif (false) {\r\n    /**\r\n     * Live search plugin currently used in NgSelect\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._liveSearch;\r\n    /**\r\n     * Subscription for changes of live search value\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._searchValueChangeSubscription;\r\n    /**\r\n     * Subscription for visibility change of popup\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._visibilitySubscription;\r\n    /**\r\n     * Minimal number of characters required for searching\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._minLength;\r\n    /**\r\n     * Popup that is displayed\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._popup;\r\n    /**\r\n     * Indication that first initial call was performed\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._initialized;\r\n    /**\r\n     * Currently used value handler plugin\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._valueHandler;\r\n    /**\r\n     * Array of provided options for select\r\n     * @type {?}\r\n     */\r\n    DynamicOptionsGatherer.prototype.options;\r\n    /**\r\n     * Occurs when array of provided options has changed\r\n     * @type {?}\r\n     */\r\n    DynamicOptionsGatherer.prototype.optionsChange;\r\n    /**\r\n     * NgSelect plugin instances available for gatherer\r\n     * @type {?}\r\n     */\r\n    DynamicOptionsGatherer.prototype.ngSelectPlugins;\r\n    /**\r\n     * Plugin bus used for inter plugin shared events\r\n     * @type {?}\r\n     */\r\n    DynamicOptionsGatherer.prototype.pluginBus;\r\n    /**\r\n     * Select element that implements default gatherers\r\n     * @type {?}\r\n     */\r\n    DynamicOptionsGatherer.prototype.select;\r\n    /**\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicOptionsGatherer.prototype._options;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pY09wdGlvbnNHYXRoZXJlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9taXNjL29wdGlvbnNHYXRoZXJlci9keW5hbWljT3B0aW9uc0dhdGhlcmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFekMsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBTzVDLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUczRCxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sMkJBQTJCLENBQUM7QUFDaEQsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLGtDQUFrQyxDQUFDOzs7OztBQU0vRCxNQUFNLE9BQU8sc0JBQXNCOzs7OztJQW1GL0IsWUFBc0IsUUFBK0M7UUFBL0MsYUFBUSxHQUFSLFFBQVEsQ0FBdUM7Ozs7UUE3RDNELGVBQVUsR0FBVyxDQUFDLENBQUM7Ozs7UUFVdkIsaUJBQVksR0FBWSxLQUFLLENBQUM7Ozs7O1FBWWpDLFlBQU8sR0FBNkIsRUFBRSxDQUFDOzs7O1FBS3ZDLGtCQUFhLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7UUFvQ2hFLElBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUNqQjtZQUNJLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztTQUMvQztRQUVELElBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFDdEQ7WUFDSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1NBQzdDO0lBQ0wsQ0FBQzs7Ozs7SUF4Q0QsSUFBVyxnQkFBZ0I7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LFdBQVcsU0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsbUNBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDO2FBQ3pGO1lBRUQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7WUFFekIsSUFBRyxPQUFDLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxNQUFNLG1DQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQy9DO2dCQUNJLHNEQUFzRDtnQkFDdEQsSUFBRyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUNsRTtvQkFDSSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztvQkFDbEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztpQkFDN0I7Z0JBRUQsT0FBTzthQUNWO1lBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsc0JBQXNCLENBQUMsV0FBVyxhQUFYLFdBQVcsY0FBWCxXQUFXLEdBQUksRUFBRSxDQUFDLENBQUM7WUFDN0UsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7S0FDN0I7Q0FDSjs7Ozs7OztJQWhNRyw2Q0FBa0M7Ozs7OztJQUtsQyxnRUFBdUQ7Ozs7OztJQUt2RCx5REFBZ0Q7Ozs7OztJQUtoRCw0Q0FBaUM7Ozs7OztJQUtqQyx3Q0FBd0I7Ozs7OztJQUt4Qiw4Q0FBd0M7Ozs7OztJQUt4QywrQ0FBc0M7Ozs7O0lBT3RDLHlDQUE4Qzs7Ozs7SUFLOUMsK0NBQW9FOzs7OztJQXFCcEUsaURBQWdEOzs7OztJQUtoRCwyQ0FBb0M7Ozs7O0lBS3BDLHdDQUFnQzs7Ozs7SUFHcEIsMENBQXlEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7aXNQcmVzZW50fSBmcm9tIFwiQGpzY3JwdC9jb21tb25cIjtcclxuaW1wb3J0IHtTdWJzY3JpcHRpb24sIE9ic2VydmFibGV9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7ZGVib3VuY2VUaW1lfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcclxuXHJcbmltcG9ydCB7T3B0aW9uc0dhdGhlcmVyfSBmcm9tIFwiLi9vcHRpb25zR2F0aGVyZXIuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7TmdTZWxlY3RQbHVnaW5JbnN0YW5jZXMsIE5nU2VsZWN0fSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9zZWxlY3RcIjtcclxuaW1wb3J0IHtOZ1NlbGVjdE9wdGlvbn0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvb3B0aW9uXCI7XHJcbmltcG9ydCB7RHluYW1pY09wdGlvbnNHYXRoZXJlck9wdGlvbnN9IGZyb20gXCIuL2R5bmFtaWNPcHRpb25zR2F0aGVyZXIuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7TGl2ZVNlYXJjaH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvbGl2ZVNlYXJjaFwiO1xyXG5pbXBvcnQge0xJVkVfU0VBUkNIfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9saXZlU2VhcmNoL3R5cGVzXCI7XHJcbmltcG9ydCB7UGx1Z2luQnVzfSBmcm9tICcuLi9wbHVnaW5CdXMvcGx1Z2luQnVzJztcclxuaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9wb3B1cCc7XHJcbmltcG9ydCB7UE9QVVB9IGZyb20gJy4uLy4uL3BsdWdpbnMvcG9wdXAvdHlwZXMnO1xyXG5pbXBvcnQge1ZBTFVFX0hBTkRMRVJ9IGZyb20gJy4uLy4uL3BsdWdpbnMvdmFsdWVIYW5kbGVyL3R5cGVzJztcclxuaW1wb3J0IHtWYWx1ZUhhbmRsZXJ9IGZyb20gJy4uLy4uL3BsdWdpbnMvdmFsdWVIYW5kbGVyJztcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGlzIHVzZWQgYXMgZm9yIG9wdGlvbnMgZ2F0aGVyaW5nIGluIGR5bmFtaWMgd2F5LCBmb3IgZXhhbXBsZSBmcm9tIGV4dGVybmFsIHNvdXJjZSB3aGVuIHdyaXRpbmdcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEeW5hbWljT3B0aW9uc0dhdGhlcmVyPFRWYWx1ZSA9IGFueT4gaW1wbGVtZW50cyBPcHRpb25zR2F0aGVyZXI8VFZhbHVlPlxyXG57XHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHJvdGVjdGVkIGZpZWxkcyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMaXZlIHNlYXJjaCBwbHVnaW4gY3VycmVudGx5IHVzZWQgaW4gTmdTZWxlY3RcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9saXZlU2VhcmNoOiBMaXZlU2VhcmNoO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBjaGFuZ2VzIG9mIGxpdmUgc2VhcmNoIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmlwdGlvbiBmb3IgdmlzaWJpbGl0eSBjaGFuZ2Ugb2YgcG9wdXBcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF92aXNpYmlsaXR5U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNaW5pbWFsIG51bWJlciBvZiBjaGFyYWN0ZXJzIHJlcXVpcmVkIGZvciBzZWFyY2hpbmdcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9taW5MZW5ndGg6IG51bWJlciA9IDE7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQb3B1cCB0aGF0IGlzIGRpc3BsYXllZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX3BvcHVwOiBQb3B1cDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluZGljYXRpb24gdGhhdCBmaXJzdCBpbml0aWFsIGNhbGwgd2FzIHBlcmZvcm1lZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDdXJyZW50bHkgdXNlZCB2YWx1ZSBoYW5kbGVyIHBsdWdpblxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX3ZhbHVlSGFuZGxlcjogVmFsdWVIYW5kbGVyO1xyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgcHJvcGVydGllcyAtIGltcGxlbWVudGF0aW9uIG9mIE9wdGlvbnNHYXRoZXJlciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcnJheSBvZiBwcm92aWRlZCBvcHRpb25zIGZvciBzZWxlY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wdGlvbnM6IE5nU2VsZWN0T3B0aW9uPFRWYWx1ZT5bXSA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2NjdXJzIHdoZW4gYXJyYXkgb2YgcHJvdmlkZWQgb3B0aW9ucyBoYXMgY2hhbmdlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3B0aW9uc0NoYW5nZTogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXJyYXkgb2YgdmlzaWJsZSwgZGlzcGxheWVkIG9wdGlvbnMgZm9yIHNlbGVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGF2YWlsYWJsZU9wdGlvbnMoKTogTmdTZWxlY3RPcHRpb248VFZhbHVlPltdXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9jY3VycyB3aGVuIGFycmF5IG9mIHZpc2libGUsIGRpc3BsYXllZCBvcHRpb25zIGhhcyBjaGFuZ2VkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYXZhaWxhYmxlT3B0aW9uc0NoYW5nZSgpOiBFdmVudEVtaXR0ZXI8dm9pZD5cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zQ2hhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmdTZWxlY3QgcGx1Z2luIGluc3RhbmNlcyBhdmFpbGFibGUgZm9yIGdhdGhlcmVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBuZ1NlbGVjdFBsdWdpbnM6IE5nU2VsZWN0UGx1Z2luSW5zdGFuY2VzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGx1Z2luIGJ1cyB1c2VkIGZvciBpbnRlciBwbHVnaW4gc2hhcmVkIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcGx1Z2luQnVzOiBQbHVnaW5CdXM8VFZhbHVlPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbGVjdCBlbGVtZW50IHRoYXQgaW1wbGVtZW50cyBkZWZhdWx0IGdhdGhlcmVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2VsZWN0OiBOZ1NlbGVjdDxUVmFsdWU+O1xyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBjb25zdHJ1Y3RvciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX29wdGlvbnM6IER5bmFtaWNPcHRpb25zR2F0aGVyZXJPcHRpb25zPFRWYWx1ZT4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYoIXRoaXMuX29wdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPcHRpb25zIGNhbiBub3QgYmUgbnVsbCFcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLl9vcHRpb25zICYmIGlzUHJlc2VudCh0aGlzLl9vcHRpb25zLm1pbkxlbmd0aCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9taW5MZW5ndGggPSB0aGlzLl9vcHRpb25zLm1pbkxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHB1YmxpYyBtZXRob2RzIC0gaW1wbGVtZW50YXRpb24gb2YgT3B0aW9uc0dhdGhlcmVyICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgZ2F0aGVyZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uIHBoYXNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0aWFsaXplR2F0aGVyZXIoKTogdm9pZFxyXG4gICAge1xyXG4gICAgICAgIGxldCBsaXZlU2VhcmNoID0gdGhpcy5uZ1NlbGVjdFBsdWdpbnNbTElWRV9TRUFSQ0hdIGFzIExpdmVTZWFyY2g7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX2xpdmVTZWFyY2ggJiYgdGhpcy5fbGl2ZVNlYXJjaCAhPSBsaXZlU2VhcmNoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbGl2ZVNlYXJjaCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcG9wdXA6IFBvcHVwID0gdGhpcy5uZ1NlbGVjdFBsdWdpbnNbUE9QVVBdIGFzIFBvcHVwO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9wb3B1cCAmJiB0aGlzLl9wb3B1cCAhPSBwb3B1cClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2liaWxpdHlTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJpbGl0eVN1YnNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl92YWx1ZUhhbmRsZXIgPSB0aGlzLm5nU2VsZWN0UGx1Z2luc1tWQUxVRV9IQU5ETEVSXSBhcyBWYWx1ZUhhbmRsZXI7XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl9wb3B1cClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmlsaXR5U3Vic2NyaXB0aW9uID0gdGhpcy5fcG9wdXAudmlzaWJpbGl0eUNoYW5nZS5zdWJzY3JpYmUoYXN5bmMgKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5faW5pdGlhbGl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NPcHRpb25zQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXRoaXMuX2xpdmVTZWFyY2gpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9saXZlU2VhcmNoID0gbGl2ZVNlYXJjaDtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZWFyY2hWYWx1ZUNoYW5nZTogT2JzZXJ2YWJsZTx2b2lkPiA9IHRoaXMuX2xpdmVTZWFyY2guc2VhcmNoVmFsdWVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLl9vcHRpb25zLmRlbGF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZUNoYW5nZSA9IHNlYXJjaFZhbHVlQ2hhbmdlLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuX29wdGlvbnMuZGVsYXkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24gPSBzZWFyY2hWYWx1ZUNoYW5nZS5zdWJzY3JpYmUoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fcHJvY2Vzc09wdGlvbnNDaGFuZ2UoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gZ2F0aGVyZXIgbmVlZHMgdG8gYmUgZGVzdHJveWVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXN0cm95R2F0aGVyZXIoKTogdm9pZFxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaFZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaFZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fdmlzaWJpbGl0eVN1YnNjcmlwdGlvbj8udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB0aGlzLl92aXNpYmlsaXR5U3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHJvdGVjdGVkIG1ldGhvZHMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBvcHRpb25zIGNoYW5nZSByZXF1ZXN0XHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBfcHJvY2Vzc09wdGlvbnNDaGFuZ2UoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBzZWFyY2hWYWx1ZTogc3RyaW5nID0gdGhpcy5fbGl2ZVNlYXJjaC5zZWFyY2hWYWx1ZTtcclxuXHJcbiAgICAgICAgLy91c2UgdmFsdWUgYXMgc2VhcmNoIHZhbHVlIGlmIG5vdCBpbml0aWFsaXplZFxyXG4gICAgICAgIGlmKCF0aGlzLl9pbml0aWFsaXplZCAmJiAhdGhpcy5wbHVnaW5CdXMuc2VsZWN0T3B0aW9ucy5tdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh0aGlzLl92YWx1ZUhhbmRsZXIuc2VsZWN0ZWRPcHRpb25zKSAmJiBpc1ByZXNlbnQodGhpcy5fdmFsdWVIYW5kbGVyLnNlbGVjdGVkT3B0aW9ucykpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZWFyY2hWYWx1ZSA9IHRoaXMuX2xpdmVTZWFyY2guc2VhcmNoVmFsdWUgPz8gdGhpcy5fdmFsdWVIYW5kbGVyLnNlbGVjdGVkT3B0aW9ucy50ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZigoc2VhcmNoVmFsdWU/Lmxlbmd0aCA/PyAwKSA8IHRoaXMuX21pbkxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vcmVtb3ZlIGF2YWlsYWJsZSBvcHRpb25zIGlmIG11bHRpcGxlIG9yIGVtcHR5IHN0cmluZ1xyXG4gICAgICAgICAgICBpZihpc1ByZXNlbnQoc2VhcmNoVmFsdWUpIHx8IHRoaXMucGx1Z2luQnVzLnNlbGVjdE9wdGlvbnMubXVsdGlwbGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zQ2hhbmdlLmVtaXQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gYXdhaXQgdGhpcy5fb3B0aW9ucy5keW5hbWljT3B0aW9uc0NhbGxiYWNrKHNlYXJjaFZhbHVlID8/ICcnKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNDaGFuZ2UuZW1pdCgpO1xyXG4gICAgfVxyXG59Il19","import * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '../../../misc/pluginBus/pluginBus';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: src/plugins/valueHandler/dynamic/dynamicValueHandler.component.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nimport { Component, ChangeDetectionStrategy, Inject, Optional, ElementRef } from '@angular/core';\r\nimport { extend, isBlank } from '@jscrpt/common';\r\nimport { NG_SELECT_PLUGIN_INSTANCES } from '../../../components/select/types';\r\nimport { VALUE_HANDLER_OPTIONS } from '../types';\r\nimport { ValueHandlerBase } from '../valueHandlerBase';\r\nimport { PluginBus } from '../../../misc/pluginBus/pluginBus';\r\nconst ɵ0 = /**\r\n * @param {?} value\r\n * @return {?}\r\n */\r\nvalue => value;\r\n/**\r\n * Default options for value handler\r\n * \\@internal\r\n * @type {?}\r\n */\r\nconst defaultOptions = {\r\n    textExtractor: (ɵ0)\r\n};\r\n/**\r\n * Component used for handling current value of NgSelect, allows values which are not present in options\r\n * @template TValue\r\n */\r\nexport class DynamicValueHandlerComponent extends ValueHandlerBase {\r\n    //######################### constructor #########################\r\n    /**\r\n     * @param {?} ngSelectPlugins\r\n     * @param {?} pluginBus\r\n     * @param {?} pluginElement\r\n     * @param {?=} options\r\n     */\r\n    constructor(ngSelectPlugins, pluginBus, pluginElement, options) {\r\n        super(ngSelectPlugins, pluginElement, pluginBus);\r\n        //######################### protected methods #########################\r\n        /**\r\n         * Sets value\r\n         */\r\n        this._setValue = (/**\r\n         * @param {?} option\r\n         * @return {?}\r\n         */\r\n        (option) => {\r\n            //multiple values are allowed\r\n            if (this.pluginBus.selectOptions.multiple) {\r\n                if (!Array.isArray(this.selectedOptions)) {\r\n                    this.selectedOptions = [];\r\n                }\r\n                if (Array.isArray(this.selectedOptions)) {\r\n                    //value exists, removing from list\r\n                    if (this.selectedOptions.find((/**\r\n                     * @param {?} selOpt\r\n                     * @return {?}\r\n                     */\r\n                    selOpt => this.valueComparer(selOpt.value, option.value)))) {\r\n                        /** @type {?} */\r\n                        let index = this.selectedOptions.indexOf(option);\r\n                        this.selectedOptions.splice(index, 1);\r\n                    }\r\n                    //adding value\r\n                    else {\r\n                        this.selectedOptions.push(option);\r\n                    }\r\n                    this.selectedOptions = [...this.selectedOptions];\r\n                }\r\n            }\r\n            else \r\n            //only signle value allowed\r\n            {\r\n                this.selectedOptions = option;\r\n            }\r\n            this._clearSelected();\r\n            this._markValueAsSelected();\r\n            this._normalState.invalidateVisuals();\r\n            this.valueChange.emit();\r\n        });\r\n        this._options = extend(true, {}, defaultOptions, options);\r\n    }\r\n    //######################### public properties - implementation of DynamicValueHandler #########################\r\n    /**\r\n     * Options for NgSelect plugin\r\n     * @return {?}\r\n     */\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /**\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    set options(options) {\r\n        this._options = extend(true, this._options, options);\r\n    }\r\n    //######################### public methods - implementation of DynamicValueHandler #########################\r\n    /**\r\n     * Sets value for NgSelect\r\n     * @param {?} value - Value to be set\r\n     * @return {?}\r\n     */\r\n    setValue(value) {\r\n        this._useOptionsAsValue(value);\r\n    }\r\n    /**\r\n     * Initialize plugin options, all operations required to be done with plugin options are handled here\r\n     * @return {?}\r\n     */\r\n    initOptions() {\r\n    }\r\n    /**\r\n     * Explicitly runs invalidation of content (change detection)\r\n     * @return {?}\r\n     */\r\n    invalidateVisuals() {\r\n    }\r\n    /**\r\n     * Loads options\r\n     * @protected\r\n     * @return {?}\r\n     */\r\n    _loadOptions() {\r\n    }\r\n    /**\r\n     * Converts value to options\r\n     * @protected\r\n     * @param {?} value - Value to be changed to options\r\n     * @return {?}\r\n     */\r\n    _useOptionsAsValue(value) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            //set empty value\r\n            if (isBlank(value) || (Array.isArray(value) && !value.length)) {\r\n                this.selectedOptions = value;\r\n                this._clearSelected();\r\n                this._normalState.invalidateVisuals();\r\n                this.valueChange.emit();\r\n                return;\r\n            }\r\n            if (this.pluginBus.selectOptions.multiple) {\r\n                if (Array.isArray(value)) {\r\n                    /** @type {?} */\r\n                    let items = value;\r\n                    /** @type {?} */\r\n                    let options = [];\r\n                    for (let itm of items) {\r\n                        options.push(yield this._loadText(itm));\r\n                    }\r\n                    this.selectedOptions = options;\r\n                }\r\n                else {\r\n                    throw new Error('Don`t you have redundant \"multiple\"?');\r\n                }\r\n            }\r\n            else {\r\n                if (Array.isArray(value)) {\r\n                    throw new Error('Are you missing attribute \"multiple\"?');\r\n                }\r\n                else {\r\n                    /** @type {?} */\r\n                    let item = value;\r\n                    this.selectedOptions = yield this._loadText(item);\r\n                }\r\n            }\r\n            this._clearSelected();\r\n            this._markValueAsSelected();\r\n            this._normalState.invalidateVisuals();\r\n            this.valueChange.emit();\r\n        });\r\n    }\r\n    /**\r\n     * Loads text for specified value\r\n     * @protected\r\n     * @param {?} value - Value that is going to be used for obtaining option\r\n     * @return {?}\r\n     */\r\n    _loadText(value) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            //load option dynamically\r\n            if (this.options.dynamicOptionsCallback) {\r\n                /** @type {?} */\r\n                let opts = yield this.options.dynamicOptionsCallback(value);\r\n                if (opts && opts.length) {\r\n                    /** @type {?} */\r\n                    let opt = opts[0];\r\n                    opt.value = value;\r\n                    opt.selected = true;\r\n                    return opt;\r\n                }\r\n            }\r\n            //load option from value\r\n            return (/** @type {?} */ ({\r\n                selected: true,\r\n                active: false,\r\n                value: value,\r\n                text: this.options.textExtractor(value)\r\n            }));\r\n        });\r\n    }\r\n}\nDynamicValueHandlerComponent.ɵfac = function DynamicValueHandlerComponent_Factory(t) { return new (t || DynamicValueHandlerComponent)(ɵngcc0.ɵɵdirectiveInject(NG_SELECT_PLUGIN_INSTANCES, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.PluginBus, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(VALUE_HANDLER_OPTIONS, 8)); };\nDynamicValueHandlerComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: DynamicValueHandlerComponent, selectors: [[\"ng-dynamic-value-handler\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function DynamicValueHandlerComponent_Template(rf, ctx) { }, encapsulation: 2, changeDetection: 0 });\r\n/** @nocollapse */\r\nDynamicValueHandlerComponent.ctorParameters = () => [\r\n    { type: undefined, decorators: [{ type: Inject, args: [NG_SELECT_PLUGIN_INSTANCES,] }, { type: Optional }] },\r\n    { type: PluginBus, decorators: [{ type: Optional }] },\r\n    { type: ElementRef },\r\n    { type: undefined, decorators: [{ type: Inject, args: [VALUE_HANDLER_OPTIONS,] }, { type: Optional }] }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DynamicValueHandlerComponent, [{\n        type: Component,\n        args: [{\n                selector: \"ng-dynamic-value-handler\",\n                template: '',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [NG_SELECT_PLUGIN_INSTANCES]\n            }, {\n                type: Optional\n            }] }, { type: ɵngcc1.PluginBus, decorators: [{\n                type: Optional\n            }] }, { type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [VALUE_HANDLER_OPTIONS]\n            }, {\n                type: Optional\n            }] }]; }, null); })();\r\nif (false) {\r\n    /**\r\n     * Sets value\r\n     * @type {?}\r\n     * @protected\r\n     */\r\n    DynamicValueHandlerComponent.prototype._setValue;\r\n}\r\nexport { ɵ0 };\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pY1ZhbHVlSGFuZGxlci5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL3ZhbHVlSGFuZGxlci9keW5hbWljL2R5bmFtaWNWYWx1ZUhhbmRsZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQy9GLE9BQU8sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFJL0MsT0FBTyxFQUFDLDBCQUEwQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDNUUsT0FBTyxFQUFDLHFCQUFxQixFQUFDLE1BQU0sVUFBVSxDQUFDO0FBRS9DLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLHFCQUFxQixDQUFDO0FBQ3JELE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxtQ0FBbUMsQ0FBQztBQUM1RDtBQUVTO0FBQXFCO0FBQ3RCO0FBSVcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLO0FBQ2hDO0FBRUQ7QUFDaUM7QUFBZTtBQUFjO0FBQUssTUFON0QsY0FBYyxHQUNwQjtBQUNBLElBQUksYUFBYSxNQUFnQjtBQUNqQyxDQUFDO0FBQ0Q7QUFDRztBQUNxRztBQUd2RztBQUtELE1BQU0sT0FBTyw0QkFBMkMsU0FBUSxnQkFBNEQ7QUFBSTtBQUVqRztBQUFTO0FBQW1DO0FBQTZCO0FBRy9GO0FBQ1I7QUFDQSxJQVVHLFlBQTRELGVBQXdDLEVBQzVFLFNBQTRCLEVBQ3hDLGFBQXlCLEVBQ2tCLE9BQTRDO0FBQ3JHLFFBQ00sS0FBSyxDQUFDLGVBQWUsRUFBRSxhQUFhLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDekQ7QUFJRTtBQUFhO0FBQXVCO0FBQWEsUUE4QnJDLGNBQVM7QUFBUztBQUE4QjtBQUUv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QUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBbUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBdkVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQWxCQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQW1CQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBS0EsQUFBQSxBQUVBLEFBQUEsQUFLQSxBQUFBLEFBRUEsQUFBQSxBQWtEQSxBQUFBLEFBRUEsQUFBQSxBQU1BLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFNQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBck1BLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQWtCQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFyQ0EsQUFBQSxBQXNDQSxBQUFBLEFBL0NBLEFBQUEsQUFpREEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBcUNBLEFBc0NBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBJbmplY3QsIE9wdGlvbmFsLCBFbGVtZW50UmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtleHRlbmQsIGlzQmxhbmt9IGZyb20gJ0Bqc2NycHQvY29tbW9uJztcclxuXHJcbmltcG9ydCB7RHluYW1pY1ZhbHVlSGFuZGxlck9wdGlvbnMsIER5bmFtaWNWYWx1ZUhhbmRsZXJ9IGZyb20gJy4vZHluYW1pY1ZhbHVlSGFuZGxlci5pbnRlcmZhY2UnO1xyXG5pbXBvcnQge05nU2VsZWN0UGx1Z2luSW5zdGFuY2VzfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL3NlbGVjdCc7XHJcbmltcG9ydCB7TkdfU0VMRUNUX1BMVUdJTl9JTlNUQU5DRVN9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0L3R5cGVzJztcclxuaW1wb3J0IHtWQUxVRV9IQU5ETEVSX09QVElPTlN9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHvJtU5nU2VsZWN0T3B0aW9ufSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL29wdGlvbic7XHJcbmltcG9ydCB7VmFsdWVIYW5kbGVyQmFzZX0gZnJvbSAnLi4vdmFsdWVIYW5kbGVyQmFzZSc7XHJcbmltcG9ydCB7UGx1Z2luQnVzfSBmcm9tICcuLi8uLi8uLi9taXNjL3BsdWdpbkJ1cy9wbHVnaW5CdXMnO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgdmFsdWUgaGFuZGxlclxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBEeW5hbWljVmFsdWVIYW5kbGVyT3B0aW9ucyA9XHJcbntcclxuICAgIHRleHRFeHRyYWN0b3I6IHZhbHVlID0+IHZhbHVlXHJcbn07XHJcblxyXG4vKipcclxuICogQ29tcG9uZW50IHVzZWQgZm9yIGhhbmRsaW5nIGN1cnJlbnQgdmFsdWUgb2YgTmdTZWxlY3QsIGFsbG93cyB2YWx1ZXMgd2hpY2ggYXJlIG5vdCBwcmVzZW50IGluIG9wdGlvbnNcclxuICovXHJcbkBDb21wb25lbnQoXHJcbntcclxuICAgIHNlbGVjdG9yOiBcIm5nLWR5bmFtaWMtdmFsdWUtaGFuZGxlclwiLFxyXG4gICAgdGVtcGxhdGU6ICcnLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIER5bmFtaWNWYWx1ZUhhbmRsZXJDb21wb25lbnQ8VFZhbHVlID0gYW55PiBleHRlbmRzIFZhbHVlSGFuZGxlckJhc2U8VFZhbHVlLCBEeW5hbWljVmFsdWVIYW5kbGVyT3B0aW9uczxUVmFsdWU+PiBpbXBsZW1lbnRzIER5bmFtaWNWYWx1ZUhhbmRsZXI8VFZhbHVlPlxyXG57XHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIHByb3BlcnRpZXMgLSBpbXBsZW1lbnRhdGlvbiBvZiBEeW5hbWljVmFsdWVIYW5kbGVyICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wdGlvbnMgZm9yIE5nU2VsZWN0IHBsdWdpblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogRHluYW1pY1ZhbHVlSGFuZGxlck9wdGlvbnM8VFZhbHVlPlxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBvcHRpb25zKG9wdGlvbnM6IER5bmFtaWNWYWx1ZUhhbmRsZXJPcHRpb25zPFRWYWx1ZT4pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh0cnVlLCB0aGlzLl9vcHRpb25zLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgY29uc3RydWN0b3IgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gICAgY29uc3RydWN0b3IoQEluamVjdChOR19TRUxFQ1RfUExVR0lOX0lOU1RBTkNFUykgQE9wdGlvbmFsKCkgbmdTZWxlY3RQbHVnaW5zOiBOZ1NlbGVjdFBsdWdpbkluc3RhbmNlcyxcclxuICAgICAgICAgICAgICAgIEBPcHRpb25hbCgpIHBsdWdpbkJ1czogUGx1Z2luQnVzPFRWYWx1ZT4sXHJcbiAgICAgICAgICAgICAgICBwbHVnaW5FbGVtZW50OiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgICAgQEluamVjdChWQUxVRV9IQU5ETEVSX09QVElPTlMpIEBPcHRpb25hbCgpIG9wdGlvbnM/OiBEeW5hbWljVmFsdWVIYW5kbGVyT3B0aW9uczxUVmFsdWU+KVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKG5nU2VsZWN0UGx1Z2lucywgcGx1Z2luRWxlbWVudCwgcGx1Z2luQnVzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgbWV0aG9kcyAtIGltcGxlbWVudGF0aW9uIG9mIER5bmFtaWNWYWx1ZUhhbmRsZXIgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB2YWx1ZSBmb3IgTmdTZWxlY3RcclxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRvIGJlIHNldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VmFsdWUodmFsdWU6VFZhbHVlfFRWYWx1ZVtdKTogdm9pZFxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX3VzZU9wdGlvbnNBc1ZhbHVlKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgcGx1Z2luIG9wdGlvbnMsIGFsbCBvcGVyYXRpb25zIHJlcXVpcmVkIHRvIGJlIGRvbmUgd2l0aCBwbHVnaW4gb3B0aW9ucyBhcmUgaGFuZGxlZCBoZXJlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0T3B0aW9ucygpXHJcbiAgICB7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBsaWNpdGx5IHJ1bnMgaW52YWxpZGF0aW9uIG9mIGNvbnRlbnQgKGNoYW5nZSBkZXRlY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnZhbGlkYXRlVmlzdWFscygpOiB2b2lkXHJcbiAgICB7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHByb3RlY3RlZCBtZXRob2RzICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdmFsdWUgXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfc2V0VmFsdWUgPSAob3B0aW9uOiDJtU5nU2VsZWN0T3B0aW9uPFRWYWx1ZT4pID0+XHJcbiAgICB7XHJcbiAgICAgICAgLy9tdWx0aXBsZSB2YWx1ZXMgYXJlIGFsbG93ZWRcclxuICAgICAgICBpZih0aGlzLnBsdWdpbkJ1cy5zZWxlY3RPcHRpb25zLm11bHRpcGxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUFycmF5LmlzQXJyYXkodGhpcy5zZWxlY3RlZE9wdGlvbnMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0ZWRPcHRpb25zKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy92YWx1ZSBleGlzdHMsIHJlbW92aW5nIGZyb20gbGlzdFxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZE9wdGlvbnMuZmluZChzZWxPcHQgPT4gdGhpcy52YWx1ZUNvbXBhcmVyKHNlbE9wdC52YWx1ZSwgb3B0aW9uLnZhbHVlKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5zZWxlY3RlZE9wdGlvbnMuaW5kZXhPZihvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2FkZGluZyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnB1c2gob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGVkT3B0aW9uc107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIC8vb25seSBzaWdubGUgdmFsdWUgYWxsb3dlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBvcHRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jbGVhclNlbGVjdGVkKCk7XHJcbiAgICAgICAgdGhpcy5fbWFya1ZhbHVlQXNTZWxlY3RlZCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9ub3JtYWxTdGF0ZS5pbnZhbGlkYXRlVmlzdWFscygpO1xyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2xvYWRPcHRpb25zKClcclxuICAgIHtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHZhbHVlIHRvIG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRvIGJlIGNoYW5nZWQgdG8gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgX3VzZU9wdGlvbnNBc1ZhbHVlKHZhbHVlOiBUVmFsdWV8VFZhbHVlW10pXHJcbiAgICB7XHJcbiAgICAgICAgLy9zZXQgZW1wdHkgdmFsdWVcclxuICAgICAgICBpZihpc0JsYW5rKHZhbHVlKSB8fCAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgIXZhbHVlLmxlbmd0aCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9ub3JtYWxTdGF0ZS5pbnZhbGlkYXRlVmlzdWFscygpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMucGx1Z2luQnVzLnNlbGVjdE9wdGlvbnMubXVsdGlwbGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHZhbHVlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uczogybVOZ1NlbGVjdE9wdGlvbjxUVmFsdWU+W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGl0bSBvZiBpdGVtcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goYXdhaXQgdGhpcy5fbG9hZFRleHQoaXRtKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEb25gdCB5b3UgaGF2ZSByZWR1bmRhbnQgXCJtdWx0aXBsZVwiPycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEFycmF5LmlzQXJyYXkodmFsdWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FyZSB5b3UgbWlzc2luZyBhdHRyaWJ1dGUgXCJtdWx0aXBsZVwiPycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IGF3YWl0IHRoaXMuX2xvYWRUZXh0KGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jbGVhclNlbGVjdGVkKCk7XHJcbiAgICAgICAgdGhpcy5fbWFya1ZhbHVlQXNTZWxlY3RlZCgpO1xyXG4gICAgICAgIHRoaXMuX25vcm1hbFN0YXRlLmludmFsaWRhdGVWaXN1YWxzKCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkcyB0ZXh0IGZvciBzcGVjaWZpZWQgdmFsdWVcclxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRoYXQgaXMgZ29pbmcgdG8gYmUgdXNlZCBmb3Igb2J0YWluaW5nIG9wdGlvblxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2xvYWRUZXh0KHZhbHVlOiBUVmFsdWUpOiBQcm9taXNlPMm1TmdTZWxlY3RPcHRpb248VFZhbHVlPj5cclxuICAgIHtcclxuICAgICAgICAvL2xvYWQgb3B0aW9uIGR5bmFtaWNhbGx5XHJcbiAgICAgICAgaWYodGhpcy5vcHRpb25zLmR5bmFtaWNPcHRpb25zQ2FsbGJhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgb3B0cyA9IGF3YWl0IHRoaXMub3B0aW9ucy5keW5hbWljT3B0aW9uc0NhbGxiYWNrKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG9wdHMgJiYgb3B0cy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcHQ6IMm1TmdTZWxlY3RPcHRpb248VFZhbHVlPiA9IG9wdHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBvcHQuc2VsZWN0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBvcHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vbG9hZCBvcHRpb24gZnJvbSB2YWx1ZVxyXG4gICAgICAgIHJldHVybiA8ybVOZ1NlbGVjdE9wdGlvbjxUVmFsdWU+PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcclxuICAgICAgICAgICAgdGV4dDogdGhpcy5vcHRpb25zLnRleHRFeHRyYWN0b3IodmFsdWUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSJdfQ=="],"sourceRoot":""}